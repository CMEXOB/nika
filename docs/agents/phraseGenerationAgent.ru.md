Данный агент генерирует sc-ссылку с текстом ответного сообщения, где переменные входной sc-ссылки заменяются на соответствующие константные узлы
из БЗ.
Этот агент вызывается в standartMessageAgent, чтобы создать ответную фразу по шаблону, вернуть ему свой результат и ответить на вопрос пользователя.

**Класс действий:**

`action_phrase_generation`


**Parameters:**

1. `replyMessageNode` является результатом работы StandartMessageGenerationAgent;

2. `phraseLink` является ссылкой с шаблонным текстом (или шаблоном текста).

**Ход работы:**

* Агент пытается получить `templateNode`, который связан с `phraseLink` с помощью неролевого отношения `nrel_phrase_template`;

<img src="../images/phraseGenerationAgentStep1.png"></img>

* Далее ищет `parametersNode` - аргументы шаблона, данный узел связан с `actionAddr` с помощью ролевого отношения  `rrel_3`;
* После этого PhraseGenerationAgent генерирует sc-ссылку по шаблону, используя `templateNode`, `parametersNode` и  `phraseLink`;
* Язык, которому принадлежит ссылка, зависит от языка, котрому принадлежала `phraseLink` ссылка . Если ссылка связана с `lang_ru` с помощью константной позитивной дуги, проведенной от`lang_ru` к `phraseLink`, тогда агент тоже создаст такую же дугу от `lang_ru` к `linkResult`. Если агент не находит язык ссылки, то и не создает никакой дуги;
* В создаваемой sc-ссылке агент находит все переменные и используя `templateNode` подбирает необходимые узлы из БЗ. Переменные заменяются на идентификаторы найденных узлов;
* Итоговая sc-ссылка связывается с `actionAddr` с помощью неролевого отношения `nrel_result`, phraseGenerationAgent завершает свою работу. 

### Пример

Пример входной структуры:

<img src="../images/phraseGenerationAgentStep2.png"></img>

Пример выходной структуры:

<img src="../images/phraseGenerationAgentStep3.png"></img>

### Результат

Возможные результаты:
 
* `SC_RESULT_OK` - sc-ссылка создана.
* `SC_RESULT_ERROR` - внутренняя ошибка, невозможно найти соответстующий шаблону фрагмент БЗ.
* `SC_RESULT_ERROR_INVALID_PARAMS` - неккоректные параметры действия.